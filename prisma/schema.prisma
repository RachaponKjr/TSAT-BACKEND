generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// CMS 
model CMSHOME {
  id                       Int      @id @default(autoincrement())
  headerTitle              String   @default("Top Service Auto Technic (TSAT)")
  headerSubTitle           String   @default("‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ ‡∏ã‡πà‡∏≠‡∏°‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤ ‡∏£‡∏ñ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ä‡πà (Porsche) ‡∏ó‡∏µ‡πà‡πÉ‡∏´‡∏ç‡πà‡πÄ‡πÄ‡∏•‡∏∞‡∏ó‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡∏Å‡∏≤‡∏£‡∏±‡∏ô‡∏ï‡∏µ‡∏á‡∏≤‡∏ô‡∏ã‡πà‡∏≠‡∏° ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 1,500 ‡∏Ñ‡∏±‡∏ô ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏ñ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏£‡∏ñ‡πÄ‡∏£‡∏≤‡πÄ‡∏≠‡∏á")
  headerSlide              String   @default("‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏á‡∏≤‡∏ô Service ‡∏Ç‡∏≠‡∏á TSAT")
  headerChooseService      String   @default("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡∏π‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏≤‡∏Å Model Porsche ‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô")
  SubChooseService         String   @default("TSAT ‡∏Ñ‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏• Porsche ‡∏ó‡∏µ‡πà‡∏ï‡∏≠‡∏ö‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ô‡∏£‡∏±‡∏Å‡∏£‡∏ñ‡∏´‡∏£‡∏π ‡πÄ‡∏£‡∏≤‡∏Ñ‡∏∑‡∏≠‡∏ó‡∏µ‡∏°‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏î‡πâ‡∏≤‡∏ô Porsche ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞ ‡∏î‡πâ‡∏ß‡∏¢‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏¢‡∏≤‡∏ß‡∏ô‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏™‡πà‡πÉ‡∏à‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î")
  headerServiceInteresting String   @default("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ó‡πà‡∏≤‡∏ô‡∏™‡∏ô‡πÉ‡∏à")
  SubServiceinIeresting    String   @default("‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤")
  reasonHeader             String   @default("‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏µ‡πà1")
  reasonSub1               String   @default("TSAT ‡πÄ‡∏£‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏£‡∏ñ Porsche ‡πÅ‡∏•‡∏∞‡∏£‡∏ñ‡∏™‡∏°‡∏£‡∏£‡∏ñ‡∏ô‡∏∞‡∏™‡∏π‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡πÉ‡∏ô‡∏™‡∏°‡∏±‡∏¢‡∏Å‡πà‡∏≠‡∏ô‡∏°‡∏≤‡∏ô‡∏≤‡∏ô‡∏Å‡∏ß‡πà‡∏≤ 10 ‡∏õ‡∏µ‡πÅ‡∏•‡∏∞‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏£‡∏ñ ‡∏°‡∏≤‡∏™‡∏π‡πà‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤ ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏õ‡∏µ 2017 ‡∏à‡∏ô‡∏ñ‡∏∂‡∏á‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ ‡πÄ‡∏£‡∏≤‡∏ú‡πà‡∏≤‡∏ô‡∏á‡∏≤‡∏ô‡∏ã‡πà‡∏≠‡∏°‡∏£‡∏ñ Porsche ‡∏ó‡∏∏‡∏Å‡∏£‡∏∏‡πà‡∏ô‡∏°‡∏≤‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 1000 ‡∏Ñ‡∏±‡∏ô ‡πÄ‡∏£‡∏≤‡∏Å‡∏•‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡∏±‡∏ô‡∏ï‡∏µ‡∏ß‡πà‡∏≤‡∏≠‡∏π‡πà‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏π‡πà‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏∏‡πà‡∏á‡∏°‡∏±‡πà‡∏ô‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏à ‡∏ó‡∏±‡πâ‡∏á‡πÉ‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏á‡∏≤‡∏ô‡∏ã‡πà‡∏≠‡∏° ‡πÅ‡∏•‡∏∞ ‡πÉ‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡πà‡∏≤‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡∏ñ Porsche ‡∏ó‡∏∏‡∏Å‡∏ó‡πà‡∏≤‡∏ô ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢")
  createdAt                DateTime @default(now())
  updatedAt                DateTime @updatedAt
}

// CMS 

model CarModel {
  id         String   @id @default(uuid()) @db.Uuid
  name       String   @unique
  image      String
  image_name String   @default("")
  showActive Boolean  @default(false)
  createdAt  DateTime @default(now()) @db.Timestamptz
  updatedAt  DateTime @default(now()) @db.Timestamptz

  carSubModels    CarSubModel[]
  CustomerWork    CustomerWork[]
  CustomerReview  CustomerReview[]
  WorkService     WorkService[]
  carServiceLinks CarServiceLink[] // ‚úÖ ‡∏û‡∏´‡∏π‡∏û‡∏à‡∏ô‡πå ‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢
}

model CarSubModel {
  id         String   @id @default(uuid()) @db.Uuid
  name       String
  image      String
  carModelId String   @db.Uuid
  createdAt  DateTime @default(now()) @db.Timestamptz
  updatedAt  DateTime @default(now()) @db.Timestamptz

  carModel       CarModel         @relation(fields: [carModelId], references: [id])
  carServices    CarService[]
  CustomerReview CustomerReview[]
  WorkService    WorkService[]
}

model CategoryServiceCarModel {
  id        String   @id @default(uuid()) @db.Uuid
  category  String
  createdAt DateTime @default(now()) @db.Timestamptz
  updatedAt DateTime @updatedAt @db.Timestamptz

  carServiceLinks CarServiceLink[] // ‚úÖ Relation ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏¢‡∏±‡∏á link ‡∏´‡∏•‡∏≤‡∏¢‡∏≠‡∏±‡∏ô
}

model CarServiceLink {
  id                        String  @id @default(uuid()) @db.Uuid
  carModelId                String  @db.Uuid
  carServiceId              String  @db.Uuid
  categoryServiceCarModelId String? @db.Uuid

  carModel   CarModel                @relation(fields: [carModelId], references: [id])
  carService CategoryServiceCarModel @relation(fields: [carServiceId], references: [id])

  createdAt DateTime @default(now()) @db.Timestamptz
  updatedAt DateTime @default(now()) @db.Timestamptz

  @@unique([carModelId, carServiceId]) // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ carModel+carService ‡∏ã‡πâ‡∏≥
}

model CustomerReview {
  id            String       @id @default(uuid()) @db.Uuid
  customerName  String
  review        String
  image         String
  carModelId    String       @db.Uuid
  carModel      CarModel     @relation(fields: [carModelId], references: [id]) // ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° relation
  carSubModelId String?      @db.Uuid // üëà optional
  carSubModel   CarSubModel? @relation(fields: [carSubModelId], references: [id])
  createdAt     DateTime     @default(now()) @db.Timestamptz
  updatedAt     DateTime     @updatedAt @db.Timestamptz
}

model CustomerWork {
  id         String            @id @default(uuid()) @db.Uuid
  title      String
  content    Json // ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Rich Text (Quill, Tiptap)
  images     String // ‡∏£‡∏π‡∏õ‡∏á‡∏≤‡∏ô (array of URLs)
  carModelId String?           @db.Uuid
  carModel   CarModel?         @relation(fields: [carModelId], references: [id])
  tags       CustomerWorkTag[] // Many-to-many ‡∏Å‡∏±‡∏ö Tag
  createdAt  DateTime          @default(now()) @db.Timestamptz
  updatedAt  DateTime          @updatedAt @db.Timestamptz
}

model WorkService {
  id            String   @id @default(uuid()) @db.Uuid
  image         String
  carModelId    String   @db.Uuid
  carSubModelId String   @db.Uuid
  createdAt     DateTime @default(now()) @db.Timestamptz
  updatedAt     DateTime @updatedAt @db.Timestamptz

  carModel    CarModel    @relation(fields: [carModelId], references: [id])
  carSubModel CarSubModel @relation(fields: [carSubModelId], references: [id])
}

model CustomerWorkTag {
  customerWorkId String   @db.Uuid
  tagId          String   @db.Uuid
  createdAt      DateTime @default(now()) @db.Timestamptz
  updatedAt      DateTime @default(now()) @db.Timestamptz

  customerWork CustomerWork @relation(fields: [customerWorkId], references: [id])
  tag          Tag          @relation(fields: [tagId], references: [id])

  @@id([customerWorkId, tagId]) // composite key
}

model CategoryService {
  id        String   @id @default(uuid()) @db.Uuid
  name      String   @unique
  subtitle  String?
  detail    String?
  createdAt DateTime @default(now()) @db.Timestamptz
  updatedAt DateTime @default(now()) @db.Timestamptz
  // services  Service[] // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á Service
}

model Service {
  id            String   @id @default(uuid()) @db.Uuid
  title         String?
  explain       String?
  icon          String? //Base64
  serviceName   String?
  serviceDetail String?
  images        String[]
  createdAt     DateTime @default(now()) @db.Timestamptz
  updatedAt     DateTime @default(now()) @db.Timestamptz
  // carServices   CarService[] // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á CarService
  // categoryId    String          @db.Uuid
  // category      CategoryService @relation(fields: [categoryId], references: [id])
}

model CarService {
  id            String      @id @default(uuid()) @db.Uuid
  carSubModelId String      @db.Uuid
  serviceId     String      @db.Uuid
  createdAt     DateTime    @default(now()) @db.Timestamptz
  updatedAt     DateTime    @default(now()) @db.Timestamptz
  carSubModel   CarSubModel @relation(fields: [carSubModelId], references: [id])
  // service       Service     @relation(fields: [serviceId], references: [id])
}

model Blog {
  id            String    @id @default(uuid()) @db.Uuid
  title         String
  content       Json
  facebookLink  String?   @db.VarChar(255)
  lineLink      String?   @db.VarChar(255)
  instagramLink String?   @db.VarChar(255)
  createdAt     DateTime  @default(now()) @db.Timestamptz
  updatedAt     DateTime  @default(now()) @db.Timestamptz
  blogTags      BlogTag[] // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á BlogTag
}

model Tag {
  id              String            @id @default(uuid()) @db.Uuid
  name            String            @unique
  createdAt       DateTime          @default(now()) @db.Timestamptz
  updatedAt       DateTime          @default(now()) @db.Timestamptz
  blogTags        BlogTag[] // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á BlogTag
  CustomerWorkTag CustomerWorkTag[]
}

model BlogTag {
  blogId    String   @db.Uuid
  tagId     String   @db.Uuid
  createdAt DateTime @default(now()) @db.Timestamptz
  updatedAt DateTime @default(now()) @db.Timestamptz
  blog      Blog     @relation(fields: [blogId], references: [id])
  tag       Tag      @relation(fields: [tagId], references: [id])

  @@id([blogId, tagId]) // ‡πÉ‡∏ä‡πâ composite key (blogId, tagId)
}

model Category {
  id        String    @id @default(uuid()) @db.Uuid
  name      String    @unique
  image     String
  products  Product[]
  createdAt DateTime  @default(now()) @db.Timestamptz
  updatedAt DateTime  @updatedAt @db.Timestamptz
}

model Product {
  id           String    @id @default(uuid()) @db.Uuid
  name         String
  detail       String
  imageProduct String
  categoryId   String?   @db.Uuid
  category     Category? @relation(fields: [categoryId], references: [id])

  createdAt DateTime @default(now()) @db.Timestamptz
  updatedAt DateTime @updatedAt @db.Timestamptz
}
